<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Macho DUI ‚Äì Side Menu</title>
  <style>
    :root{
      --bg: rgba(10,12,16,0.92);
      --panel: rgba(20,22,28,0.92);
      --text: #e8edf4;
      --muted: #9aa6b2;
      --accent: #2a86ff;
      --accent-weak: rgba(42,134,255,0.20);
      --border: rgba(255,255,255,0.06);
      --shadow: 0 10px 30px rgba(0,0,0,0.45);
      --w: 340px;
      --row-h: 36px;
      --radius: 10px;
    }
    *{ box-sizing: border-box; user-select:none; -webkit-user-select:none; font-family: Arial, Helvetica, sans-serif; }
    html,body{ margin:0; background:transparent; color:var(--text); }

    /* kont√©ner: jobb oldal, f√ºgg≈ëlegesen k√∂z√©pen */
    .dock{
      position: fixed;
      right: 40px;
      top: 50%;
      transform: translateY(-50%);
      width: var(--w);
      max-width: calc(100vw - 40px);
      border-radius: var(--radius);
      background: var(--bg);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .header{
      height: 64px;
      padding: 12px 14px;
      display:flex; align-items:center; justify-content:space-between;
      background:
        radial-gradient(120px 60px at 85% 0%, rgba(42,134,255,0.35), transparent 70%),
        linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.00));
      border-bottom: 1px solid var(--border);
    }
    .brand{
      font-size: 22px; font-weight: 800; letter-spacing: .5px;
      background: linear-gradient(90deg, #eaf2ff, #acd0ff);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .subtitle{ font-size: 12px; color: var(--muted); }

    .list{
      background: var(--panel);
      padding: 10px;
      border-bottom: 1px solid var(--border);
      max-height: calc(var(--row-h) * 10 + 20px);
      overflow: hidden;
    }
    .row{
      height: var(--row-h);
      line-height: var(--row-h);
      padding: 0 12px;
      border-radius: 6px;
      margin-bottom: 6px;
      background: rgba(255,255,255,0.035);
      border: 1px solid transparent;
      display:flex; align-items:center; justify-content:space-between;
      transition: background .12s, border-color .12s;
      font-size: 14px;
    }
    .row:last-child{ margin-bottom: 0; }
    .row .label{ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .row .hint{ color: var(--muted); font-size: 12px; opacity:.9; }
    .row.active{
      background: var(--accent-weak);
      border-color: var(--accent);
      box-shadow: inset 0 0 0 1px rgba(42,134,255,0.25);
    }

    .footer{
      display:flex; align-items:center; justify-content:space-between;
      padding: 8px 12px;
      font-size: 12px;
      color: var(--muted);
      background: rgba(255,255,255,0.02);
    }

    /* egyszer≈± ‚Äúalmen√º‚Äù panel (placeholder) */
    .overlay{
      position:absolute; inset:0;
      background: rgba(10,12,16,0.96);
      transform: translateX(100%);
      transition: transform .16s ease-out;
      display:flex; flex-direction:column;
    }
    .overlay.open{ transform: translateX(0); }
    .ov-head{
      padding: 12px 14px; border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between;
    }
    .ov-title{ font-weight:700; }
    .ov-body{ padding:12px; color:var(--muted); }
    .hidden{ display:none !important; }
  </style>
</head>
<body>
  <div id="menu" class="dock hidden" tabindex="-1" aria-hidden="true">
    <div class="header">
      <div class="brand" id="brand">Phaze</div>
      <div class="subtitle">INS: open/close ‚Ä¢ ‚Üë ‚Üì ‚Üê ‚Üí ‚Ä¢ Enter</div>
    </div>

    <div class="list" id="list"></div>

    <div class="footer">
      <div id="page">1/9</div>
      <div>‚Üë‚Üì Navig√°l√°s ‚Ä¢ Enter/‚Üí Almen√º ‚Ä¢ ‚Üê Vissza</div>
    </div>

    <!-- Almen√º overlay (placeholder tartalommal) -->
    <div class="overlay" id="overlay">
      <div class="ov-head">
        <div class="ov-title" id="ovTitle">Submenu</div>
        <div class="subtitle">‚Üê vissza</div>
      </div>
      <div class="ov-body" id="ovBody">
        Itt majd az adott kateg√≥ria be√°ll√≠t√°sai jelennek meg.
      </div>
    </div>
  </div>

  <script>
    // ----- MODEL -----
    const MODEL = {
      title: 'Phaze',
      items: [
        { label: 'Main menu' , hint:'' },
        { label: 'Player'     , hint:'‚Ä∫', hasSub:true },
        { label: 'Server'     , hint:'‚Ä∫', hasSub:true },
        { label: 'Weapon'     , hint:'‚Ä∫', hasSub:true },
        { label: 'Combat'     , hint:'‚Ä∫', hasSub:true },
        { label: 'Vehicle'    , hint:'‚Ä∫', hasSub:true },
        { label: 'Visual'     , hint:'‚Ä∫', hasSub:true },
        { label: 'Miscellaneous', hint:'‚Ä∫', hasSub:true },
        { label: 'Settings'   , hint:'‚Ä∫', hasSub:true },
        { label: 'Search'     , hint:'üîé' }
      ],
      index: 1, // kezd≈ë kijel√∂l√©s
      submenuOpen: false
    };

    // ----- DOM -----
    const menu = document.getElementById('menu');
    const list = document.getElementById('list');
    const brand = document.getElementById('brand');
    const overlay = document.getElementById('overlay');
    const ovTitle = document.getElementById('ovTitle');
    const ovBody  = document.getElementById('ovBody');

    function render(){
      brand.textContent = MODEL.title;
      list.innerHTML = '';
      MODEL.items.forEach((it, i)=>{
        const row = document.createElement('div');
        row.className = 'row' + (i===MODEL.index ? ' active':'');
        row.dataset.idx = i;
        row.innerHTML = `
          <div class="label">${it.label}</div>
          <div class="hint">${it.hint||''}</div>
        `;
        list.appendChild(row);
      });
    }

    function show(){ menu.classList.remove('hidden'); menu.removeAttribute('aria-hidden'); }
    function hide(){ menu.classList.add('hidden'); menu.setAttribute('aria-hidden','true'); }

    // ----- NAVIGATION -----
    function move(delta){
      if (MODEL.submenuOpen) return;
      const max = MODEL.items.length - 1;
      MODEL.index = Math.min(max, Math.max(0, MODEL.index + delta));
      render();
    }
    function openSub(){
      const it = MODEL.items[MODEL.index];
      if (!it || !it.hasSub) return flash('Nincs almen√º');
      MODEL.submenuOpen = true;
      ovTitle.textContent = it.label;
      ovBody.textContent = `"${it.label}" almen√º tartalma (hely≈ërz≈ë).`;
      overlay.classList.add('open');
    }
    function closeSub(){
      if (!MODEL.submenuOpen) return;
      MODEL.submenuOpen = false;
      overlay.classList.remove('open');
    }
    function confirm(){
      const it = MODEL.items[MODEL.index];
      if (it?.hasSub) openSub(); else flash(`"${it?.label||''}" kiv√°lasztva`);
    }

    // vizu√°lis kis √©rtes√≠t√©s
    function flash(msg){
      const d = document.createElement('div');
      d.textContent = msg;
      d.style.position='fixed'; d.style.bottom='18px'; d.style.right='18px';
      d.style.padding='8px 12px'; d.style.fontSize='12px';
      d.style.background='rgba(255,255,255,0.12)'; d.style.color='#fff';
      d.style.borderRadius='6px';
      document.body.appendChild(d);
      setTimeout(()=>d.remove(), 1100);
    }

    // ----- KEYS -----
    window.addEventListener('keydown', (e)=>{
      // Ezek a billenty≈±k vez√©relnek ‚Äì a DUI f√≥kuszban kell legyen
      if (e.key === 'ArrowUp')   { e.preventDefault(); move(-1); }
      if (e.key === 'ArrowDown') { e.preventDefault(); move(+1); }
      if (e.key === 'ArrowLeft') { e.preventDefault(); closeSub(); }
      if (e.key === 'ArrowRight'){ e.preventDefault(); openSub(); }
      if (e.key === 'Enter')     { e.preventDefault(); confirm(); }
      if (e.code === 'NumpadEnter'){ e.preventDefault(); confirm(); }
    });

    // ----- DUI MESSAGES (Lua -> UI) -----
    window.addEventListener('message', (event)=>{
      const data = event.data || {};
      if (data.type === 'show') { show(); return; }
      if (data.type === 'hide') { hide(); return; }
      if (data.type === 'init') {
        if (data.title) MODEL.title = data.title;
        if (Array.isArray(data.items)) {
          MODEL.items = data.items.map(x => typeof x === 'string' ? ({label:x}) : x);
          MODEL.index = 0;
        }
        render(); show();
        return;
      }
      if (data.type === 'setTitle' && data.title){
        MODEL.title = data.title; render();
      }
      if (data.type === 'setIndex' && Number.isInteger(data.index)){
        MODEL.index = Math.max(0, Math.min(MODEL.items.length-1, data.index)); render();
      }
    });

    // els≈ë render (rejtve marad, am√≠g DUI-b√≥l nem j√∂n 'show' vagy 'init')
    render();
  </script>
</body>
</html>
